<div ngbAccordion #microrregiaoAccordion="ngbAccordion">
  <div
    [ngbAccordionItem]="'microrregiao-card-' + index"
    [destroyOnHide]="false"
    class="border-0 mb-2"
  >
    <div ngbAccordionHeader>
      <div
        class="col-12 py-1 d-flex justify-content-between align-items-center microrregiao-card"
      >
        <div class="col-3">
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              name="microrregiao-checkbox-rateio"
              id="microrregiao-checkbox-rateio"
              [(ngModel)]="microrregiaoBooleanCheckbox"
              (change)="microrregiaoCheckboxChange($event)"
            />
            <label
              class="form-check-label"
              for="microrregiao-checkbox-rateio"
              >{{ microrregiao.nome }}</label
            >
          </div>
        </div>

        <div class="col">
          <button ngbAccordionButton class="m-0 p-0 bg-transparent"></button>
        </div>

        <div class="col-3 d-inline-flex justify-content-between">
          <div class="col-4">
            <input
              type="text"
              mask="percent.2"
              prefix="~"
              suffix="%"
              decimalMarker=","
              class="form-control"
              name="microrregiao-percentual-rateio"
              id="microrregiao-percentual-rateio"
              [(ngModel)]="microrregiaoPercentualRateio"
              readonly="true"
              [disabled]="!microrregiaoBooleanCheckbox"
            />
          </div>
          <div class="col-8">
            <input
              type="text"
              mask="separator.2"
              prefix="R$"
              thousandSeparator="."
              decimalMarker=","
              [inputTransformFn]="rtlCurrencyInputTransformFn"
              [outputTransformFn]="rtlCurrencyOutputTransformFn"
              class="form-control"
              name="microrregiao-quantia-rateio"
              id="microrregiao-quantia-rateio"
              min="1"
              [(ngModel)]="microrregiaoQuantiaRateio"
              [disabled]="!microrregiaoBooleanCheckbox"
              (input)="microrregiaoQuantiaRateioChange()"
            />
          </div>
        </div>
      </div>
    </div>

    <div ngbAccordionCollapse>
      <div ngbAccordionBody class="p-0 pt-2">
        <ng-template>
          <ng-container *ngFor="let cidade of microrregiao.cidades">
            <cidade-item-card
              [cidade]="cidade"
              [microrregiaoId]="microrregiao.id"
              [microrregiaoBooleanCheckbox]="microrregiaoBooleanCheckbox"
              [microrregiaoPercentualRateio]="microrregiaoPercentualRateio"
              [microrregiaoQuantiaRateio]="microrregiaoQuantiaRateio"
              (cidadeCheck)="cidadeFilhaCheckboxChangeEvent($event)"
            ></cidade-item-card>
          </ng-container>
        </ng-template>
      </div>
    </div>
  </div>
</div>
